{
  "name": "YouTube Complete Automation System",
  "version": "1.0.0",
  "description": "ë°±ë§Œ êµ¬ë…ì ë‹¬ì„±ì„ ìœ„í•œ ì™„ì „ ìë™í™” n8n ì›Œí¬í”Œë¡œìš°",
  "workflows": [
    {
      "name": "Main Trend Monitoring",
      "id": "trend_monitoring_main",
      "active": true,
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [{"field": "hours", "value": 1}]
            }
          },
          "name": "Hourly Trend Check",
          "type": "n8n-nodes-base.cron",
          "typeVersion": 1,
          "position": [240, 300],
          "id": "node_001"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/youtube/v3/videos",
            "options": {
              "queryParameters": {
                "part": "statistics,snippet",
                "chart": "mostPopular",
                "regionCode": "KR",
                "maxResults": 50,
                "key": "={{$env.YOUTUBE_API_KEY}}"
              }
            }
          },
          "name": "YouTube Trending API",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [460, 200],
          "id": "node_002"
        },
        {
          "parameters": {
            "url": "https://trends.google.com/trends/api/dailytrends",
            "options": {
              "queryParameters": {
                "hl": "ko-KR",
                "tz": "-540",
                "geo": "KR"
              }
            }
          },
          "name": "Google Trends API",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [460, 300],
          "id": "node_003"
        },
        {
          "parameters": {
            "functionCode": "// í†µí•© íŠ¸ë Œë“œ ë¶„ì„ ë° ìŠ¤ì½”ì–´ë§\nconst youtubeItems = $input.first().json.items || [];\nconst googleTrends = $input.last().json || {};\n\nconst processedData = [];\n\n// YouTube ë°ì´í„° ì²˜ë¦¬\nfor (const item of youtubeItems) {\n  const stats = item.statistics;\n  const snippet = item.snippet;\n  \n  // ì¡°íšŒìˆ˜ ê¸°ë°˜ ìŠ¤ì½”ì–´ ê³„ì‚°\n  const viewCount = parseInt(stats.viewCount) || 0;\n  const likeCount = parseInt(stats.likeCount) || 0;\n  const commentCount = parseInt(stats.commentCount) || 0;\n  \n  // íŠ¸ë Œë“œ ìŠ¤ì½”ì–´ ê³µì‹ (ìŠ¤í† ë¦¬ ë°©ì‹ + ë¹„ì¦ˆë‹ˆìŠ¤ PT ì§€í‘œ)\n  const engagementRate = (likeCount + commentCount) / Math.max(viewCount, 1);\n  const velocityScore = viewCount / Math.max((Date.now() - new Date(snippet.publishedAt).getTime()) / (1000 * 60 * 60), 1);\n  \n  const trendScore = (\n    Math.log10(viewCount + 1) * 30 +\n    engagementRate * 1000 * 25 +\n    Math.log10(velocityScore + 1) * 20 +\n    (commentCount / Math.max(viewCount / 1000, 1)) * 25\n  );\n  \n  // í‚¤ì›Œë“œ ì¶”ì¶œ (ì œëª©ì—ì„œ)\n  const keywords = snippet.title\n    .toLowerCase()\n    .replace(/[^ê°€-í£a-zA-Z0-9\\s]/g, '')\n    .split(' ')\n    .filter(word => word.length > 1)\n    .slice(0, 5);\n  \n  processedData.push({\n    platform: 'youtube',\n    videoId: item.id,\n    title: snippet.title,\n    channelTitle: snippet.channelTitle,\n    channelId: snippet.channelId,\n    viewCount: viewCount,\n    likeCount: likeCount,\n    commentCount: commentCount,\n    engagementRate: Math.round(engagementRate * 10000) / 100,\n    trendScore: Math.round(trendScore * 100) / 100,\n    keywords: keywords,\n    publishedAt: snippet.publishedAt,\n    categoryId: snippet.categoryId,\n    thumbnailUrl: snippet.thumbnails?.high?.url || '',\n    duration: snippet.duration || '',\n    analyzedAt: new Date().toISOString()\n  });\n}\n\n// ìŠ¤ì½”ì–´ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬\nprocessedData.sort((a, b) => b.trendScore - a.trendScore);\n\n// ìƒìœ„ 20ê°œë§Œ ë°˜í™˜\nreturn processedData.slice(0, 20).map(item => ({json: item}));"
          },
          "name": "Trend Analysis Engine",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [680, 250],
          "id": "node_004"
        },
        {
          "parameters": {
            "conditions": {
              "number": [
                {
                  "value1": "={{$json.trendScore}}",
                  "operation": "larger",
                  "value2": 85
                }
              ]
            }
          },
          "name": "High Impact Filter",
          "type": "n8n-nodes-base.if",
          "typeVersion": 1,
          "position": [900, 250],
          "id": "node_005"
        },
        {
          "parameters": {
            "channel": "#youtube-automation",
            "text": "ğŸš€ **HIGH IMPACT TREND DETECTED!**\\n\\nğŸ“Š **Trend Score**: {{$json.trendScore}}\\nğŸ¬ **Title**: {{$json.title}}\\nğŸ“º **Channel**: {{$json.channelTitle}}\\nğŸ‘€ **Views**: {{$json.viewCount | number}}\\nâ¤ï¸ **Engagement**: {{$json.engagementRate}}%\\nğŸ”¥ **Keywords**: {{$json.keywords.join(', ')}}\\n\\n**Action Required**: ì¦‰ì‹œ ê´€ë ¨ ì½˜í…ì¸  ì œì‘ì„ ì‹œì‘í•˜ì„¸ìš”!\\n**Priority**: ğŸ”´ HIGH\\n**Estimated ROI**: {{($json.trendScore * 1000) | number}} views potential",
            "username": "TrendBot",
            "iconEmoji": ":fire:"
          },
          "name": "Urgent Alert to Slack",
          "type": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "position": [1120, 150],
          "id": "node_006"
        },
        {
          "parameters": {
            "operation": "insert",
            "table": "trend_analysis",
            "columns": [
              "platform",
              "video_id",
              "title",
              "channel_title",
              "channel_id",
              "view_count",
              "like_count",
              "comment_count",
              "engagement_rate",
              "trend_score",
              "keywords",
              "published_at",
              "category_id",
              "thumbnail_url",
              "analyzed_at"
            ]
          },
          "name": "Store Trend Data",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [1120, 350],
          "id": "node_007"
        },
        {
          "parameters": {
            "functionCode": "// ìë™ ì½˜í…ì¸  ì•„ì´ë””ì–´ ìƒì„± íŠ¸ë¦¬ê±°\nconst highScoreItems = $input.all().filter(item => item.json.trendScore > 80);\n\nif (highScoreItems.length > 0) {\n  // ìƒìœ„ 3ê°œ íŠ¸ë Œë“œ ì„ íƒ\n  const topTrends = highScoreItems.slice(0, 3);\n  \n  const contentIdeas = topTrends.map(item => {\n    const data = item.json;\n    \n    // ìŠ¤í† ë¦¬ ê³µì‹ ì ìš©í•œ ì œëª© ë³€í˜•\n    const titleVariants = [\n      `${data.keywords[0]}ì„ 1000ê°œ í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?`,\n      `99%ê°€ ëª¨ë¥´ëŠ” ${data.keywords[0]}ì˜ ë¹„ë°€`,\n      `${data.keywords[0]} vs ${data.keywords[1]}, ê²°ê³¼ê°€ ì¶©ê²©ì `,\n      `ì§€ê¸ˆ ë‹¹ì¥ ${data.keywords[0]}ë¥¼ í•´ì•¼ í•˜ëŠ” ì´ìœ `,\n      `${data.channelTitle}ì´ ${data.keywords[0]}ë¡œ ì„±ê³µí•œ ë°©ë²•`\n    ];\n    \n    return {\n      originalTitle: data.title,\n      originalChannel: data.channelTitle,\n      suggestedTitles: titleVariants,\n      keywords: data.keywords,\n      trendScore: data.trendScore,\n      expectedViews: Math.round(data.trendScore * 1000),\n      urgencyLevel: data.trendScore > 90 ? 'HIGH' : 'MEDIUM',\n      contentType: 'experimental', // ìŠ¤í† ë¦¬ ë°©ì‹ ê¸°ë³¸ íƒ€ì…\n      targetDuration: '8-10ë¶„',\n      priority: Math.ceil(data.trendScore / 20)\n    };\n  });\n  \n  return contentIdeas.map(idea => ({json: idea}));\n} else {\n  return [];\n}"
          },
          "name": "Content Idea Generator",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [1340, 250],
          "id": "node_008"
        }
      ],
      "connections": {
        "Hourly Trend Check": {
          "main": [["YouTube Trending API", "Google Trends API"]]
        },
        "YouTube Trending API": {
          "main": [["Trend Analysis Engine"]]
        },
        "Google Trends API": {
          "main": [["Trend Analysis Engine"]]
        },
        "Trend Analysis Engine": {
          "main": [["High Impact Filter"]]
        },
        "High Impact Filter": {
          "main": [
            ["Urgent Alert to Slack", "Content Idea Generator"],
            ["Store Trend Data"]
          ]
        },
        "Store Trend Data": {
          "main": [["Content Idea Generator"]]
        }
      }
    },
    {
      "name": "AI Content Creation Pipeline",
      "id": "content_creation_main",
      "active": true,
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [{"field": "hours", "value": 8}]
            }
          },
          "name": "Content Creation Trigger",
          "type": "n8n-nodes-base.cron",
          "typeVersion": 1,
          "position": [240, 300],
          "id": "content_001"
        },
        {
          "parameters": {
            "operation": "select",
            "table": "trend_analysis",
            "limit": 5,
            "sort": {
              "values": [
                {
                  "column": "trend_score",
                  "direction": "desc"
                }
              ]
            },
            "where": {
              "conditions": [
                {
                  "column": "analyzed_at",
                  "operation": "greaterOrEqual",
                  "value": "NOW() - INTERVAL '24 hours'"
                }
              ]
            }
          },
          "name": "Get Top Trends",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [460, 300],
          "id": "content_002"
        },
        {
          "parameters": {
            "model": "gpt-4-1106-preview",
            "messages": [
              {
                "role": "system",
                "content": "ë‹¹ì‹ ì€ ìŠ¤í† ë¦¬ì˜ 30ì¼ 68ë§Œ êµ¬ë…ì ê³µì‹ì„ ì™„ë²½íˆ ë§ˆìŠ¤í„°í•œ ìœ íŠœë¸Œ ì½˜í…ì¸  ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì£¼ì–´ì§„ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°”ì´ëŸ´ ê°€ëŠ¥ì„±ì´ ë†’ì€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\\n\\ní•µì‹¬ ê³µì‹:\\n1. ì¦‰ì‹œ ë³¸ë¡  ì§„ì… (0ì´ˆ ì¸íŠ¸ë¡œ)\\n2. 'Xë¥¼ 1000ê°œ í•˜ë©´?' ì‹¤í—˜í˜• êµ¬ì¡°\\n3. ë¹ ë¥¸ í…œí¬ ìœ ë„ í¸ì§‘ ê°€ì´ë“œ í¬í•¨\\n4. 4ë‹¨ê³„ êµ¬ë… ìœ ë„ ì§„í™” ì ìš©\\n5. ì—­ë°œìƒ ë§ˆì¼€íŒ… ìš”ì†Œ í¬í•¨\\n\\nìŠ¤í¬ë¦½íŠ¸ êµ¬ì¡°:\\n- HOOK (0-15ì´ˆ): ì¶©ê²©ì  ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°\\n- PROBLEM (15ì´ˆ-2ë¶„): í‰ë²”í•œ ì‚¬ëŒì˜ ê³ ë¯¼\\n- SOLUTION (2ë¶„-8ë¶„): 3ë‹¨ê³„ í•´ê²°ì±…\\n- CTA (8ë¶„-10ë¶„): ì§„í™”ëœ êµ¬ë… ìœ ë„"
              },
              {
                "role": "user",
                "content": "íŠ¸ë Œë“œ ë°ì´í„°:\\nì œëª©: {{$json.title}}\\ní‚¤ì›Œë“œ: {{$json.keywords}}\\níŠ¸ë Œë“œ ìŠ¤ì½”ì–´: {{$json.trendScore}}\\nì¹´í…Œê³ ë¦¬: {{$json.category_id}}\\n\\nì´ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ 10ë¶„ ë¶„ëŸ‰ì˜ ë°”ì´ëŸ´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. í¸ì§‘ ì§€ì‹œì‚¬í•­ë„ í¬í•¨í•´ì£¼ì„¸ìš”."
              }
            ],
            "temperature": 0.7,
            "maxTokens": 2500
          },
          "name": "GPT-4 Script Generator",
          "type": "n8n-nodes-base.openAi",
          "typeVersion": 1,
          "position": [680, 200],
          "id": "content_003"
        },
        {
          "parameters": {
            "model": "dall-e-3",
            "prompt": "ë‹¤ìŒ ìœ íŠœë¸Œ ì˜ìƒì„ ìœ„í•œ ì„íŒ©íŠ¸ ìˆëŠ” ì¸ë„¤ì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”:\\n\\nì œëª©: {{$node['Get Top Trends'].json['title']}}\\ní‚¤ì›Œë“œ: {{$node['Get Top Trends'].json['keywords']}}\\n\\nìš”êµ¬ì‚¬í•­:\\n- ì£¼ì–¸ê·œ 15ë¶„ ë¶„ì„ë²• ê¸°ì¤€ ìµœì í™”\\n- í´ë¦­ë¥  10% ëª©í‘œ\\n- ê°•ë ¬í•œ ìƒ‰ìƒ ëŒ€ë¹„ (ë…¸ë€ìƒ‰ í¬ì¸íŠ¸)\\n- ê°ì • í‘œí˜„ ê·¹ëŒ€í™”\\n- 3ì´ˆ ì•ˆì— ë‚´ìš© íŒŒì•… ê°€ëŠ¥\\n- ëª¨ë°”ì¼ ìµœì í™” ê³ ë ¤\\n\\nìŠ¤íƒ€ì¼: í˜„ì‹¤ì ì´ê³  ìƒë™ê° ìˆëŠ” í•œêµ­ì¸ ëª¨ë¸, ë†€ëŒ í‘œì •, ë°ê³  ëŒ€ë¹„ê°€ ê°•í•œ ë°°ê²½",
            "size": "1792x1024",
            "quality": "hd",
            "style": "vivid"
          },
          "name": "DALL-E Thumbnail Generator",
          "type": "n8n-nodes-base.openAi",
          "typeVersion": 1,
          "position": [680, 400],
          "id": "content_004"
        },
        {
          "parameters": {
            "functionCode": "// ì½˜í…ì¸  í’ˆì§ˆ ê²€ì¦ ë° SEO ìµœì í™”\\nconst script = $input.first().json.choices[0].message.content;\\nconst thumbnail = $input.last().json.data[0].url;\\nconst trendData = $node['Get Top Trends'].json;\\n\\n// ìŠ¤í¬ë¦½íŠ¸ í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°\\nconst wordCount = script.split(' ').length;\\nconst hasHook = script.toLowerCase().includes('hook') || script.includes('ì¶©ê²©') || script.includes('ë†€ë¼ìš´');\\nconst hasCTA = script.toLowerCase().includes('êµ¬ë…') || script.includes('ì¢‹ì•„ìš”');\\nconst hasNumbers = /\\d+/.test(script);\\nconst hasProblemSolution = script.includes('ë¬¸ì œ') && script.includes('í•´ê²°');\\n\\n// í’ˆì§ˆ ìŠ¤ì½”ì–´ (0-100)\\nconst qualityScore = (\\n  (wordCount > 800 && wordCount < 1500 ? 25 : 15) +\\n  (hasHook ? 20 : 0) +\\n  (hasCTA ? 20 : 0) +\\n  (hasNumbers ? 15 : 0) +\\n  (hasProblemSolution ? 20 : 0)\\n);\\n\\n// SEO ìµœì í™” ì œëª© ìƒì„±\\nconst optimizedTitles = [\\n  `${trendData.keywords[0]}ì„ 1000ê°œ í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ? (ì¶©ê²©ê²°ê³¼)`,\\n  `99%ê°€ ëª¨ë¥´ëŠ” ${trendData.keywords[0]}ì˜ ë¹„ë°€ (ì‹¤í™”)`,\\n  `${trendData.keywords[0]} vs ${trendData.keywords[1]} ê²°ê³¼ê°€...`,\\n  `ì§€ê¸ˆ ë‹¹ì¥ ${trendData.keywords[0]}ë¥¼ í•´ì•¼ í•˜ëŠ” ì´ìœ `,\\n  `${trendData.keywords[0]}ë¡œ ì›” 100ë§Œì›? ê°€ëŠ¥í•©ë‹ˆë‹¤`\\n];\\n\\n// íƒœê·¸ ìë™ ìƒì„±\\nconst tags = [\\n  ...trendData.keywords,\\n  'ìœ íŠœë¸Œ', 'ê¿€íŒ', 'ì •ë³´', 'ë¦¬ë·°', 'ì‹¤í—˜',\\n  'ë†€ë¼ìš´', 'ì¶©ê²©', 'ë¹„ë°€', 'ë°©ë²•', 'ê²°ê³¼'\\n].slice(0, 15);\\n\\n// ì„¤ëª… ìë™ ìƒì„±\\nconst description = `ğŸ”¥ ì´ ì˜ìƒì€ ì •ë§ ì¶©ê²©ì ì…ë‹ˆë‹¤!\\n\\n${trendData.keywords.join(', ')}ì— ëŒ€í•œ ë†€ë¼ìš´ ì‹¤í—˜ ê²°ê³¼ë¥¼ ê³µê°œí•©ë‹ˆë‹¤.\\n\\nğŸ“‹ íƒ€ì„ìŠ¤íƒ¬í”„:\\n00:00 ì¸íŠ¸ë¡œ\\n00:15 ì¶©ê²©ì  ì‚¬ì‹¤ ê³µê°œ\\n02:00 ì‹¤í—˜ ì‹œì‘\\n05:30 ë†€ë¼ìš´ ê²°ê³¼\\n08:00 í•µì‹¬ ì •ë¦¬\\n09:30 ë‹¤ìŒ ì˜ìƒ ì˜ˆê³ \\n\\n#${tags.join(' #')}\\n\\nğŸ“¢ êµ¬ë…ê³¼ ì¢‹ì•„ìš”ëŠ” ë” ì¢‹ì€ ì½˜í…ì¸  ì œì‘ì— í° í˜ì´ ë©ë‹ˆë‹¤!`;\\n\\nreturn [{\\n  json: {\\n    script: script,\\n    thumbnailUrl: thumbnail,\\n    qualityScore: qualityScore,\\n    optimizedTitles: optimizedTitles,\\n    selectedTitle: optimizedTitles[0],\\n    tags: tags,\\n    description: description,\\n    estimatedCTR: Math.min(qualityScore / 10, 12),\\n    estimatedViews: Math.round(trendData.trend_score * 1200),\\n    recommendedSchedule: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(), // 2ì‹œê°„ í›„\\n    contentType: 'experimental',\\n    duration: '10ë¶„',\\n    originalTrend: trendData,\\n    createdAt: new Date().toISOString()\\n  }\\n}];"
          },
          "name": "Content Optimizer",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [900, 300],
          "id": "content_005"
        },
        {
          "parameters": {
            "conditions": {
              "number": [
                {
                  "value1": "={{$json.qualityScore}}",
                  "operation": "larger",
                  "value2": 75
                }
              ]
            }
          },
          "name": "Quality Gate",
          "type": "n8n-nodes-base.if",
          "typeVersion": 1,
          "position": [1120, 300],
          "id": "content_006"
        },
        {
          "parameters": {
            "operation": "insert",
            "table": "content_queue",
            "columns": [
              "title",
              "script",
              "thumbnail_url",
              "description",
              "tags",
              "quality_score",
              "estimated_ctr",
              "estimated_views",
              "scheduled_time",
              "content_type",
              "status"
            ],
            "additionalFields": {
              "status": "ready_for_production"
            }
          },
          "name": "Queue for Production",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [1340, 200],
          "id": "content_007"
        },
        {
          "parameters": {
            "channel": "#content-alerts",
            "text": "âœ… **NEW CONTENT READY FOR PRODUCTION**\\n\\nğŸ¬ **Title**: {{$json.selectedTitle}}\\nâ­ **Quality Score**: {{$json.qualityScore}}/100\\nğŸ“Š **Estimated CTR**: {{$json.estimatedCTR}}%\\nğŸ‘€ **Estimated Views**: {{$json.estimatedViews | number}}\\nâ° **Recommended Schedule**: {{$json.recommendedSchedule}}\\n\\nğŸš€ **Action**: í”„ë¡œë•ì…˜ íŒ€ì— ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì´¬ì˜ ë° í¸ì§‘ì„ ì‹œì‘í•˜ì„¸ìš”!",
            "username": "ContentBot",
            "iconEmoji": ":movie_camera:"
          },
          "name": "Production Alert",
          "type": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "position": [1340, 300],
          "id": "content_008"
        }
      ],
      "connections": {
        "Content Creation Trigger": {
          "main": [["Get Top Trends"]]
        },
        "Get Top Trends": {
          "main": [["GPT-4 Script Generator", "DALL-E Thumbnail Generator"]]
        },
        "GPT-4 Script Generator": {
          "main": [["Content Optimizer"]]
        },
        "DALL-E Thumbnail Generator": {
          "main": [["Content Optimizer"]]
        },
        "Content Optimizer": {
          "main": [["Quality Gate"]]
        },
        "Quality Gate": {
          "main": [
            ["Queue for Production", "Production Alert"],
            []
          ]
        }
      }
    },
    {
      "name": "Multi-Platform Distribution",
      "id": "distribution_main",
      "active": true,
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [{"field": "minutes", "value": 30}]
            }
          },
          "name": "Check Upload Queue",
          "type": "n8n-nodes-base.cron",
          "typeVersion": 1,
          "position": [240, 300],
          "id": "dist_001"
        },
        {
          "parameters": {
            "operation": "select",
            "table": "content_queue",
            "where": {
              "conditions": [
                {
                  "column": "status",
                  "operation": "equal",
                  "value": "ready_for_upload"
                },
                {
                  "column": "scheduled_time",
                  "operation": "lessOrEqual",
                  "value": "NOW()"
                }
              ]
            },
            "limit": 1
          },
          "name": "Get Next Upload",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [460, 300],
          "id": "dist_002"
        },
        {
          "parameters": {
            "conditions": {
              "string": [
                {
                  "value1": "={{$json.id}}",
                  "operation": "isNotEmpty"
                }
              ]
            }
          },
          "name": "Has Content to Upload",
          "type": "n8n-nodes-base.if",
          "typeVersion": 1,
          "position": [680, 300],
          "id": "dist_003"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/upload/youtube/v3/videos",
            "method": "POST",
            "options": {
              "headers": {
                "Authorization": "Bearer {{$env.YOUTUBE_ACCESS_TOKEN}}",
                "Content-Type": "application/json"
              },
              "body": {
                "snippet": {
                  "title": "={{$json.title}}",
                  "description": "={{$json.description}}",
                  "tags": "={{$json.tags.split(',')}}",
                  "categoryId": "22",
                  "defaultLanguage": "ko",
                  "defaultAudioLanguage": "ko"
                },
                "status": {
                  "privacyStatus": "public",
                  "publishAt": "={{$json.scheduled_time}}"
                }
              }
            }
          },
          "name": "YouTube Upload",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [900, 200],
          "id": "dist_004"
        },
        {
          "parameters": {
            "url": "https://graph.instagram.com/v17.0/{{$env.INSTAGRAM_ACCOUNT_ID}}/media",
            "method": "POST",
            "options": {
              "queryParameters": {
                "access_token": "{{$env.INSTAGRAM_ACCESS_TOKEN}}"
              },
              "body": {
                "video_url": "={{$json.video_url}}",
                "caption": "={{$json.title}} #Reels #{{$json.tags.split(',')[0]}}",
                "media_type": "REELS"
              }
            }
          },
          "name": "Instagram Reels Upload",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [900, 300],
          "id": "dist_005"
        },
        {
          "parameters": {
            "url": "https://open-api.tiktok.com/share/video/upload/",
            "method": "POST",
            "options": {
              "headers": {
                "Authorization": "Bearer {{$env.TIKTOK_ACCESS_TOKEN}}",
                "Content-Type": "application/json"
              },
              "body": {
                "video": {
                  "video_url": "={{$json.video_url}}"
                },
                "post_info": {
                  "title": "={{$json.title}}",
                  "privacy_level": "PUBLIC_TO_EVERYONE",
                  "disable_duet": false,
                  "disable_comment": false,
                  "disable_stitch": false,
                  "video_cover_timestamp_ms": 1000
                }
              }
            }
          },
          "name": "TikTok Upload",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [900, 400],
          "id": "dist_006"
        },
        {
          "parameters": {
            "text": "ğŸ¬ ìƒˆ ì˜ìƒì´ ì˜¬ë¼ì™”ì–´ìš”!\\n\\n{{$json.title}}\\n\\n{{$json.description.substring(0, 200)}}...\\n\\nğŸ”— YouTube: https://youtu.be/{{$node['YouTube Upload'].json.id}}\\nğŸ“± Instagram: @your_channel\\nğŸµ TikTok: @your_channel\\n\\n#ìœ íŠœë¸Œ #{{$json.tags.split(',')[0]}} #{{$json.tags.split(',')[1]}}",
            "additionalFields": {
              "attachments": [
                {
                  "media_url": "={{$json.thumbnail_url}}"
                }
              ]
            }
          },
          "name": "Twitter Cross-Promotion",
          "type": "n8n-nodes-base.twitter",
          "typeVersion": 1,
          "position": [900, 500],
          "id": "dist_007"
        },
        {
          "parameters": {
            "functionCode": "// ì—…ë¡œë“œ ê²°ê³¼ í†µí•© ë° ì¶”ì  ì‹œì‘\\nconst contentData = $node['Get Next Upload'].json;\\nconst youtubeResult = $node['YouTube Upload'].json;\\nconst instagramResult = $node['Instagram Reels Upload'].json;\\nconst tiktokResult = $node['TikTok Upload'].json;\\nconst twitterResult = $node['Twitter Cross-Promotion'].json;\\n\\n// ì—…ë¡œë“œ ì„±ê³µ ì—¬ë¶€ í™•ì¸\\nconst uploadResults = {\\n  youtube: {\\n    success: !!youtubeResult.id,\\n    videoId: youtubeResult.id || null,\\n    url: youtubeResult.id ? `https://youtu.be/${youtubeResult.id}` : null\\n  },\\n  instagram: {\\n    success: !!instagramResult.id,\\n    mediaId: instagramResult.id || null\\n  },\\n  tiktok: {\\n    success: !!tiktokResult.data?.video_id,\\n    videoId: tiktokResult.data?.video_id || null\\n  },\\n  twitter: {\\n    success: !!twitterResult.id,\\n    tweetId: twitterResult.id || null\\n  }\\n};\\n\\n// ì„±ê³µí•œ í”Œë«í¼ ìˆ˜ ê³„ì‚°\\nconst successCount = Object.values(uploadResults).filter(result => result.success).length;\\nconst totalPlatforms = Object.keys(uploadResults).length;\\n\\nreturn [{\\n  json: {\\n    contentId: contentData.id,\\n    title: contentData.title,\\n    uploadResults: uploadResults,\\n    successRate: Math.round((successCount / totalPlatforms) * 100),\\n    successCount: successCount,\\n    totalPlatforms: totalPlatforms,\\n    youtubeVideoId: uploadResults.youtube.videoId,\\n    youtubeUrl: uploadResults.youtube.url,\\n    uploadedAt: new Date().toISOString(),\\n    nextActions: [\\n      'ì„±ê³¼ ì¶”ì  ì‹œì‘',\\n      'ì¸ë„¤ì¼ A/B í…ŒìŠ¤íŠ¸ ì¤€ë¹„',\\n      'ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬ í™œì„±í™”',\\n      'í¬ë¡œìŠ¤ í”„ë¡œëª¨ì…˜ ìŠ¤ì¼€ì¤„ë§'\\n    ]\\n  }\\n}];"
          },
          "name": "Upload Results Aggregator",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [1120, 350],
          "id": "dist_008"
        },
        {
          "parameters": {
            "operation": "update",
            "table": "content_queue",
            "updateKey": "id",
            "columns": [
              "status",
              "youtube_video_id",
              "youtube_url",
              "upload_success_rate",
              "uploaded_at"
            ],
            "where": {
              "conditions": [
                {
                  "column": "id",
                  "operation": "equal",
                  "value": "={{$json.contentId}}"
                }
              ]
            },
            "additionalFields": {
              "status": "uploaded",
              "uploaded_at": "NOW()"
            }
          },
          "name": "Update Content Status",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [1340, 300],
          "id": "dist_009"
        },
        {
          "parameters": {
            "channel": "#upload-success",
            "text": "ğŸš€ **MULTI-PLATFORM UPLOAD COMPLETE!**\\n\\nğŸ¬ **Content**: {{$json.title}}\\nğŸ“Š **Success Rate**: {{$json.successRate}}% ({{$json.successCount}}/{{$json.totalPlatforms}})\\n\\nğŸ”— **YouTube**: {{$json.youtubeUrl || 'Failed'}}\\nğŸ“± **Instagram**: {{$json.uploadResults.instagram.success ? 'Success' : 'Failed'}}\\nğŸµ **TikTok**: {{$json.uploadResults.tiktok.success ? 'Success' : 'Failed'}}\\nğŸ¦ **Twitter**: {{$json.uploadResults.twitter.success ? 'Success' : 'Failed'}}\\n\\nâ° **Uploaded**: {{$json.uploadedAt}}\\nğŸ¯ **Next**: ì„±ê³¼ ì¶”ì  ì‹œì‘ë¨",
            "username": "UploadBot",
            "iconEmoji": ":rocket:"
          },
          "name": "Success Notification",
          "type": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "position": [1340, 400],
          "id": "dist_010"
        }
      ],
      "connections": {
        "Check Upload Queue": {
          "main": [["Get Next Upload"]]
        },
        "Get Next Upload": {
          "main": [["Has Content to Upload"]]
        },
        "Has Content to Upload": {
          "main": [
            [
              "YouTube Upload",
              "Instagram Reels Upload", 
              "TikTok Upload",
              "Twitter Cross-Promotion"
            ],
            []
          ]
        },
        "YouTube Upload": {
          "main": [["Upload Results Aggregator"]]
        },
        "Instagram Reels Upload": {
          "main": [["Upload Results Aggregator"]]
        },
        "TikTok Upload": {
          "main": [["Upload Results Aggregator"]]
        },
        "Twitter Cross-Promotion": {
          "main": [["Upload Results Aggregator"]]
        },
        "Upload Results Aggregator": {
          "main": [["Update Content Status", "Success Notification"]]
        }
      }
    },
    {
      "name": "Real-time Performance Analytics",
      "id": "analytics_main",
      "active": true,
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [{"field": "minutes", "value": 5}]
            }
          },
          "name": "Analytics Collection Trigger",
          "type": "n8n-nodes-base.cron",
          "typeVersion": 1,
          "position": [240, 300],
          "id": "analytics_001"
        },
        {
          "parameters": {
            "operation": "select",
            "table": "content_queue",
            "where": {
              "conditions": [
                {
                  "column": "status",
                  "operation": "equal",
                  "value": "uploaded"
                },
                {
                  "column": "uploaded_at",
                  "operation": "greaterOrEqual",
                  "value": "NOW() - INTERVAL '48 hours'"
                }
              ]
            }
          },
          "name": "Get Recent Uploads",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [460, 300],
          "id": "analytics_002"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/youtube/v3/videos",
            "options": {
              "queryParameters": {
                "part": "statistics,contentDetails",
                "id": "={{$json.youtube_video_id}}",
                "key": "={{$env.YOUTUBE_API_KEY}}"
              }
            }
          },
          "name": "YouTube Analytics API",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [680, 200],
          "id": "analytics_003"
        },
        {
          "parameters": {
            "url": "https://www.googleapis.com/youtube/v3/reports",
            "options": {
              "queryParameters": {
                "ids": "channel=={{$env.YOUTUBE_CHANNEL_ID}}",
                "metrics": "views,likes,dislikes,comments,shares,subscribersGained,averageViewDuration,clickThroughRate",
                "dimensions": "video",
                "filters": "video=={{$json.youtube_video_id}}",
                "startDate": "={{new Date(Date.now() - 48*60*60*1000).toISOString().split('T')[0]}}",
                "endDate": "={{new Date().toISOString().split('T')[0]}}",
                "key": "={{$env.YOUTUBE_API_KEY}}"
              }
            }
          },
          "name": "YouTube Detailed Analytics",
          "type": "n8n-nodes-base.httpRequest",
          "typeVersion": 3,
          "position": [680, 300],
          "id": "analytics_004"
        },
        {
          "parameters": {
            "functionCode": "// ë¹„ì¦ˆë‹ˆìŠ¤ PT 20ê°€ì§€ ì§€í‘œ ê³„ì‚°\\nconst basicStats = $input.first().json.items[0]?.statistics || {};\\nconst detailedStats = $input.last().json.rows?.[0] || [];\\nconst contentData = $node['Get Recent Uploads'].json;\\n\\n// ê¸°ë³¸ ì§€í‘œ íŒŒì‹±\\nconst viewCount = parseInt(basicStats.viewCount) || 0;\\nconst likeCount = parseInt(basicStats.likeCount) || 0;\\nconst dislikeCount = parseInt(basicStats.dislikeCount) || 0;\\nconst commentCount = parseInt(basicStats.commentCount) || 0;\\n\\n// ìƒì„¸ ì§€í‘œ íŒŒì‹± (YouTube Analytics API)\\nconst shares = detailedStats[5] || 0;\\nconst subscribersGained = detailedStats[6] || 0;\\nconst averageViewDuration = detailedStats[7] || 0;\\nconst clickThroughRate = detailedStats[8] || 0;\\n\\n// ì—…ë¡œë“œ í›„ ê²½ê³¼ ì‹œê°„ ê³„ì‚°\\nconst uploadTime = new Date(contentData.uploaded_at);\\nconst currentTime = new Date();\\nconst hoursElapsed = (currentTime - uploadTime) / (1000 * 60 * 60);\\n\\n// 20ê°€ì§€ ì„±ê³µ ì§€í‘œ ê³„ì‚°\\nconst metrics = {\\n  // 1-10: ì½˜í…ì¸  ì„±ê³¼ ì§€í‘œ\\n  pullContentViews: viewCount,\\n  clickThroughRate: clickThroughRate,\\n  watchTime: averageViewDuration,\\n  shortsViews: viewCount, // ì‹¤ì œë¡œëŠ” ì‡¼ì¸  ë³„ë„ ì¡°íšŒ\\n  subscriptionRate: viewCount > 0 ? (subscribersGained / viewCount) * 100 : 0,\\n  subscriberGrowth: subscribersGained,\\n  longFormViews: viewCount,\\n  pageTraffic: 0, // ì™¸ë¶€ ì—°ë™ í•„ìš”\\n  searchTraffic: 0, // Search Console ì—°ë™ í•„ìš”\\n  keyContentEngagement: (likeCount + commentCount + shares) / Math.max(viewCount, 1) * 100,\\n  \\n  // 11-20: ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ\\n  keyContentViews: viewCount,\\n  linkClickRate: 0, // ì™¸ë¶€ ì¶”ì  í•„ìš”\\n  landingPageVisits: 0, // Google Analytics ì—°ë™ í•„ìš”\\n  paidConversionRate: 0, // ì‹¤ì œ íŒë§¤ ë°ì´í„° í•„ìš”\\n  paidCustomers: 0,\\n  averageOrderValue: 0,\\n  revenue: 0,\\n  taskCompletionRate: 100, // ì—…ë¡œë“œ ì„±ê³µë¥ ë¡œ ëŒ€ì²´\\n  learningComprehension: Math.min(clickThroughRate * 10, 100), // CTR ê¸°ë°˜ ì¶”ì •\\n  executionConsistency: 100 // ìŠ¤ì¼€ì¤„ ì¤€ìˆ˜ìœ¨ë¡œ ëŒ€ì²´\\n};\\n\\n// ì¢…í•© ì„±ê³¼ ì ìˆ˜ ê³„ì‚°\\nconst performanceScore = (\\n  Math.min(metrics.clickThroughRate * 10, 100) * 0.15 +\\n  Math.min(metrics.subscriptionRate * 20, 100) * 0.15 +\\n  Math.min(metrics.keyContentEngagement * 2, 100) * 0.15 +\\n  Math.min(viewCount / 1000, 100) * 0.15 +\\n  Math.min(subscribersGained / 10, 100) * 0.15 +\\n  Math.min(averageViewDuration / 60, 100) * 0.25\\n);\\n\\n// ëª©í‘œ ë‹¬ì„± ì—¬ë¶€ í™•ì¸\\nconst targets = {\\n  clickThroughRate: { target: 5, achieved: clickThroughRate >= 5 },\\n  subscriptionRate: { target: 2, achieved: metrics.subscriptionRate >= 2 },\\n  watchTime: { target: 60, achieved: (averageViewDuration / 600) * 100 >= 60 }, // 10ë¶„ ì˜ìƒ ê¸°ì¤€ 60%\\n  viewVelocity: { target: 1000, achieved: viewCount / Math.max(hoursElapsed, 1) >= 1000 }\\n};\\n\\n// ì•Œë¦¼ ë“±ê¸‰ ê²°ì •\\nlet alertLevel = 'normal';\\nif (performanceScore >= 90) alertLevel = 'excellent';\\nelse if (performanceScore >= 70) alertLevel = 'good';\\nelse if (performanceScore < 30) alertLevel = 'urgent';\\nelse if (performanceScore < 50) alertLevel = 'warning';\\n\\nreturn [{\\n  json: {\\n    contentId: contentData.id,\\n    videoId: contentData.youtube_video_id,\\n    title: contentData.title,\\n    uploadedAt: contentData.uploaded_at,\\n    hoursElapsed: Math.round(hoursElapsed * 100) / 100,\\n    basicMetrics: {\\n      views: viewCount,\\n      likes: likeCount,\\n      comments: commentCount,\\n      shares: shares,\\n      subscribersGained: subscribersGained\\n    },\\n    businessMetrics: metrics,\\n    performanceScore: Math.round(performanceScore * 100) / 100,\\n    targetAchievement: targets,\\n    alertLevel: alertLevel,\\n    viewVelocity: Math.round(viewCount / Math.max(hoursElapsed, 1)),\\n    engagementRate: Math.round(((likeCount + commentCount) / Math.max(viewCount, 1)) * 10000) / 100,\\n    analyzedAt: new Date().toISOString()\\n  }\\n}];"
          },
          "name": "Calculate Business Metrics",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [900, 250],
          "id": "analytics_005"
        },
        {
          "parameters": {
            "conditions": {
              "string": [
                {
                  "value1": "={{$json.alertLevel}}",
                  "operation": "equal",
                  "value": "urgent"
                }
              ]
            }
          },
          "name": "Check Alert Level",
          "type": "n8n-nodes-base.if",
          "typeVersion": 1,
          "position": [1120, 250],
          "id": "analytics_006"
        },
        {
          "parameters": {
            "channel": "#urgent-alerts",
            "text": "ğŸš¨ **URGENT: LOW PERFORMANCE DETECTED**\\n\\nğŸ¬ **Video**: {{$json.title}}\\nğŸ“Š **Performance Score**: {{$json.performanceScore}}/100\\nâ±ï¸ **Hours Since Upload**: {{$json.hoursElapsed}}\\n\\nğŸ“ˆ **Key Metrics**:\\nâ€¢ Views: {{$json.basicMetrics.views | number}}\\nâ€¢ CTR: {{$json.businessMetrics.clickThroughRate}}%\\nâ€¢ Subscription Rate: {{$json.businessMetrics.subscriptionRate}}%\\nâ€¢ Engagement: {{$json.engagementRate}}%\\n\\nğŸ¯ **Targets**:\\nâ€¢ CTR Target: {{$json.targetAchievement.clickThroughRate.achieved ? 'âœ…' : 'âŒ'}} ({{$json.businessMetrics.clickThroughRate}}% / 5%)\\nâ€¢ Sub Rate: {{$json.targetAchievement.subscriptionRate.achieved ? 'âœ…' : 'âŒ'}} ({{$json.businessMetrics.subscriptionRate}}% / 2%)\\n\\nâš¡ **Immediate Actions Required**:\\n1. ì¸ë„¤ì¼ A/B í…ŒìŠ¤íŠ¸ ì‹œì‘\\n2. ì œëª© ìµœì í™” ê²€í† \\n3. í”„ë¡œëª¨ì…˜ ë¶€ìŠ¤íŠ¸ ê³ ë ¤\\n4. ì»¤ë®¤ë‹ˆí‹° í™œë™ ê°•í™”",
            "username": "PerformanceBot",
            "iconEmoji": ":warning:"
          },
          "name": "Urgent Performance Alert",
          "type": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "position": [1340, 150],
          "id": "analytics_007"
        },
        {
          "parameters": {
            "operation": "insert",
            "table": "performance_analytics",
            "columns": [
              "content_id",
              "video_id",
              "hours_elapsed",
              "views",
              "likes",
              "comments", 
              "shares",
              "subscribers_gained",
              "click_through_rate",
              "subscription_rate",
              "engagement_rate",
              "performance_score",
              "alert_level",
              "view_velocity",
              "analyzed_at"
            ]
          },
          "name": "Store Performance Data",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [1340, 350],
          "id": "analytics_008"
        }
      ],
      "connections": {
        "Analytics Collection Trigger": {
          "main": [["Get Recent Uploads"]]
        },
        "Get Recent Uploads": {
          "main": [["YouTube Analytics API", "YouTube Detailed Analytics"]]
        },
        "YouTube Analytics API": {
          "main": [["Calculate Business Metrics"]]
        },
        "YouTube Detailed Analytics": {
          "main": [["Calculate Business Metrics"]]
        },
        "Calculate Business Metrics": {
          "main": [["Check Alert Level"]]
        },
        "Check Alert Level": {
          "main": [
            ["Urgent Performance Alert"],
            ["Store Performance Data"]
          ]
        },
        "Store Performance Data": {
          "main": [[]]
        }
      }
    },
    {
      "name": "Smart Optimization Engine",
      "id": "optimization_main",
      "active": true,
      "nodes": [
        {
          "parameters": {
            "rule": {
              "interval": [{"field": "hours", "value": 2}]
            }
          },
          "name": "Optimization Check Trigger",
          "type": "n8n-nodes-base.cron",
          "typeVersion": 1,
          "position": [240, 300],
          "id": "opt_001"
        },
        {
          "parameters": {
            "operation": "select",
            "table": "performance_analytics",
            "where": {
              "conditions": [
                {
                  "column": "analyzed_at",
                  "operation": "greaterOrEqual",
                  "value": "NOW() - INTERVAL '6 hours'"
                },
                {
                  "column": "alert_level",
                  "operation": "in",
                  "value": "warning,urgent"
                }
              ]
            },
            "sort": {
              "values": [
                {
                  "column": "performance_score",
                  "direction": "asc"
                }
              ]
            },
            "limit": 3
          },
          "name": "Get Underperforming Content",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [460, 300],
          "id": "opt_002"
        },
        {
          "parameters": {
            "functionCode": "// ì„±ê³¼ ë¶„ì„ ë° ìµœì í™” ì•¡ì…˜ ê²°ì •\\nconst contentData = $input.all();\\nconst optimizationActions = [];\\n\\nfor (const content of contentData) {\\n  const data = content.json;\\n  const actions = [];\\n  \\n  // í´ë¦­ë¥  ìµœì í™” (< 3%)\\n  if (data.click_through_rate < 3) {\\n    actions.push({\\n      type: 'thumbnail_optimization',\\n      priority: 'high',\\n      reason: `CTR ${data.click_through_rate}% is below 3% threshold`,\\n      action: 'Generate 3 new thumbnail variants and start A/B test',\\n      expectedImprovement: '50-100% CTR increase'\\n    });\\n  }\\n  \\n  // êµ¬ë… ì „í™˜ìœ¨ ìµœì í™” (< 2%)\\n  if (data.subscription_rate < 2) {\\n    actions.push({\\n      type: 'cta_optimization',\\n      priority: 'medium',\\n      reason: `Subscription rate ${data.subscription_rate}% is below 2% threshold`,\\n      action: 'Apply Story-style 4-stage subscription evolution',\\n      expectedImprovement: '30-70% subscription increase'\\n    });\\n  }\\n  \\n  // ì°¸ì—¬ë„ ìµœì í™” (< 2%)\\n  if (data.engagement_rate < 2) {\\n    actions.push({\\n      type: 'engagement_boost',\\n      priority: 'medium',\\n      reason: `Engagement rate ${data.engagement_rate}% is below 2% threshold`,\\n      action: 'Add community polls and engagement triggers',\\n      expectedImprovement: '25-50% engagement increase'\\n    });\\n  }\\n  \\n  // ë°”ì´ëŸ´ ê°€ëŠ¥ì„± ì²´í¬ (ì‹œì²­ ì†ë„ > í‰ê· ì˜ 200%)\\n  if (data.view_velocity > 2000) {\\n    actions.push({\\n      type: 'viral_acceleration',\\n      priority: 'urgent',\\n      reason: `High view velocity ${data.view_velocity}/hour detected`,\\n      action: 'Increase promotion budget and cross-platform push',\\n      expectedImprovement: 'Potential viral breakthrough'\\n    });\\n  }\\n  \\n  // ì„±ê³¼ê°€ ì‹¬ê°í•˜ê²Œ ì €ì¡°í•œ ê²½ìš° (ì„±ê³¼ ì ìˆ˜ < 20)\\n  if (data.performance_score < 20) {\\n    actions.push({\\n      type: 'emergency_intervention',\\n      priority: 'urgent',\\n      reason: `Critical performance score ${data.performance_score}/100`,\\n      action: 'Complete content strategy review and immediate title/thumbnail change',\\n      expectedImprovement: 'Prevent complete failure'\\n    });\\n  }\\n  \\n  if (actions.length > 0) {\\n    optimizationActions.push({\\n      contentId: data.content_id,\\n      videoId: data.video_id,\\n      title: data.title || 'Unknown',\\n      currentMetrics: {\\n        views: data.views,\\n        ctr: data.click_through_rate,\\n        subscriptionRate: data.subscription_rate,\\n        engagementRate: data.engagement_rate,\\n        performanceScore: data.performance_score\\n      },\\n      actions: actions,\\n      totalActions: actions.length,\\n      highPriorityActions: actions.filter(a => a.priority === 'urgent' || a.priority === 'high').length\\n    });\\n  }\\n}\\n\\nreturn optimizationActions.map(action => ({json: action}));"
          },
          "name": "Analyze & Plan Optimizations",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [680, 300],
          "id": "opt_003"
        },
        {
          "parameters": {
            "conditions": {
              "number": [
                {
                  "value1": "={{$json.highPriorityActions}}",
                  "operation": "larger",
                  "value2": 0
                }
              ]
            }
          },
          "name": "Has High Priority Actions",
          "type": "n8n-nodes-base.if",
          "typeVersion": 1,
          "position": [900, 300],
          "id": "opt_004"
        },
        {
          "parameters": {
            "model": "dall-e-3",
            "prompt": "ë‹¤ìŒ ì €ì„±ê³¼ ìœ íŠœë¸Œ ì˜ìƒì„ ìœ„í•œ ê°œì„ ëœ ì¸ë„¤ì¼ 3ê°€ì§€ ë³€í˜•ì„ ìƒì„±í•´ì£¼ì„¸ìš”:\\n\\nì›ë³¸ ì œëª©: {{$json.title}}\\ní˜„ì¬ CTR: {{$json.currentMetrics.ctr}}%\\nëª©í‘œ CTR: 8%+\\n\\nê°œì„  ìš”êµ¬ì‚¬í•­:\\n1. ë” ê°•ë ¬í•œ ìƒ‰ìƒ ëŒ€ë¹„ (ë¹¨ê°•, ë…¸ë‘ í¬ì¸íŠ¸)\\n2. ê·¹ëŒ€í™”ëœ ê°ì • í‘œí˜„ (ë†€ëŒ, ì¶©ê²©)\\n3. ì¦‰ì‹œ ì´í•´ ê°€ëŠ¥í•œ ë¹„ì£¼ì–¼\\n4. 3ì´ˆ ì•ˆì— í´ë¦­ ìš•êµ¬ ìê·¹\\n5. ëª¨ë°”ì¼ ìµœì í™” ê³ ë ¤\\n\\në³€í˜• ìŠ¤íƒ€ì¼:\\n- ë³€í˜• 1: ë§¤ìš° ë°ê³  ëŒ€ë¹„ ê°•í•œ ë°°ê²½\\n- ë³€í˜• 2: ì–´ë‘ìš´ ë°°ê²½ì— ê°•ë ¬í•œ í¬ì¸íŠ¸\\n- ë³€í˜• 3: ë¯¸ë‹ˆë©€í•˜ì§€ë§Œ ì„íŒ©íŠ¸ ìˆëŠ” êµ¬ì„±\\n\\ní•œêµ­ì¸ ëª¨ë¸, í˜„ì‹¤ì  ìŠ¤íƒ€ì¼, HD í’ˆì§ˆ",
            "size": "1792x1024",
            "quality": "hd",
            "numberOfImages": 3
          },
          "name": "Generate Optimized Thumbnails",
          "type": "n8n-nodes-base.openAi",
          "typeVersion": 1,
          "position": [1120, 200],
          "id": "opt_005"
        },
        {
          "parameters": {
            "model": "gpt-4-1106-preview",
            "messages": [
              {
                "role": "system",
                "content": "ë‹¹ì‹ ì€ ìŠ¤í† ë¦¬ì˜ 4ë‹¨ê³„ êµ¬ë… ìœ ë„ ì§„í™”ë¥¼ ë§ˆìŠ¤í„°í•œ ìœ íŠœë¸Œ ìµœì í™” ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì €ì„±ê³¼ ì˜ìƒì˜ CTAë¥¼ ê°œì„ í•´ì£¼ì„¸ìš”.\\n\\n4ë‹¨ê³„ ì§„í™”:\\nLevel 1: ê¸°ë³¸í˜• (êµ¬ë… ë¶€íƒ)\\nLevel 2: ì´ìœ  ì œê³µí˜• (êµ¬ë…ì ëª©í‘œ ì œì‹œ)\\nLevel 3: ê²½ìŸ ìê·¹í˜• (ê²Œì„í™” ìš”ì†Œ)\\nLevel 4: ì‹œê°ì  ìœ ë„í˜• (ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸)\\n\\ní˜„ì¬ ìƒí™©ì— ë§ëŠ” ìµœì ì˜ CTA ì „ëµì„ ì œì•ˆí•´ì£¼ì„¸ìš”."
              },
              {
                "role": "user",
                "content": "ì˜ìƒ ì •ë³´:\\nì œëª©: {{$json.title}}\\ní˜„ì¬ êµ¬ë… ì „í™˜ìœ¨: {{$json.currentMetrics.subscriptionRate}}%\\nëª©í‘œ: 5% ì´ìƒ\\n\\ní˜„ì¬ ë¬¸ì œì ì„ ë¶„ì„í•˜ê³  4ë‹¨ê³„ ì§„í™”ë¥¼ ì ìš©í•œ ê°œì„ ëœ CTA ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”."
              }
            ],
            "temperature": 0.8,
            "maxTokens": 1000
          },
          "name": "Optimize CTA Strategy",
          "type": "n8n-nodes-base.openAi",
          "typeVersion": 1,
          "position": [1120, 300],
          "id": "opt_006"
        },
        {
          "parameters": {
            "functionCode": "// A/B í…ŒìŠ¤íŠ¸ ìŠ¤ì¼€ì¤„ë§ ë° ìë™ ì ìš©\\nconst contentData = $input.first().json;\\nconst thumbnails = $input.second().json.data || [];\\nconst ctaStrategy = $input.last().json.choices[0].message.content;\\n\\n// A/B í…ŒìŠ¤íŠ¸ ê³„íš ìƒì„±\\nconst abTestPlan = {\\n  contentId: contentData.contentId,\\n  videoId: contentData.videoId,\\n  testType: 'thumbnail_cta_optimization',\\n  variants: [],\\n  duration: 48, // 48ì‹œê°„ í…ŒìŠ¤íŠ¸\\n  trafficSplit: 25, // ê° ë³€í˜•ì— 25%ì”©\\n  successMetrics: ['click_through_rate', 'subscription_rate'],\\n  startTime: new Date().toISOString(),\\n  endTime: new Date(Date.now() + 48 * 60 * 60 * 1000).toISOString()\\n};\\n\\n// ì¸ë„¤ì¼ ë³€í˜• ì¶”ê°€\\nthumbnails.forEach((thumbnail, index) => {\\n  abTestPlan.variants.push({\\n    id: `thumbnail_variant_${index + 1}`,\\n    type: 'thumbnail',\\n    url: thumbnail.url,\\n    description: `AI ìµœì í™” ì¸ë„¤ì¼ ë³€í˜• ${index + 1}`,\\n    expectedCTRImprovement: `+${20 + index * 10}%`\\n  });\\n});\\n\\n// ì›ë³¸ ì¸ë„¤ì¼ë„ ëŒ€ì¡°êµ°ìœ¼ë¡œ ì¶”ê°€\\nabTestPlan.variants.push({\\n  id: 'original_thumbnail',\\n  type: 'thumbnail',\\n  url: 'original',\\n  description: 'ì›ë³¸ ì¸ë„¤ì¼ (ëŒ€ì¡°êµ°)',\\n  expectedCTRImprovement: 'baseline'\\n});\\n\\n// ìë™ ì‹¤í–‰ ì•¡ì…˜\\nconst autoActions = {\\n  immediate: [\\n    {\\n      action: 'start_ab_test',\\n      target: 'thumbnails',\\n      variants: abTestPlan.variants.length,\\n      duration: '48 hours'\\n    },\\n    {\\n      action: 'update_cta',\\n      target: 'video_description',\\n      newCTA: ctaStrategy.substring(0, 500) // ì²« 500ìë§Œ ì‚¬ìš©\\n    }\\n  ],\\n  scheduled: [\\n    {\\n      action: 'check_results',\\n      time: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),\\n      description: '24ì‹œê°„ ì¤‘ê°„ ì ê²€'\\n    },\\n    {\\n      action: 'apply_winner',\\n      time: abTestPlan.endTime,\\n      description: 'ìµœê³  ì„±ê³¼ ë³€í˜• ìë™ ì ìš©'\\n    }\\n  ]\\n};\\n\\n// ì˜ˆìƒ ì„±ê³¼ ê³„ì‚°\\nconst expectedImprovements = {\\n  ctrImprovement: `+${Math.round(Math.random() * 50 + 30)}%`, // 30-80% ê°œì„  ì˜ˆìƒ\\n  subscriptionImprovement: `+${Math.round(Math.random() * 40 + 20)}%`, // 20-60% ê°œì„  ì˜ˆìƒ\\n  overallScore: `+${Math.round(Math.random() * 30 + 20)} points` // 20-50ì  ê°œì„  ì˜ˆìƒ\\n};\\n\\nreturn [{\\n  json: {\\n    optimization: {\\n      contentId: contentData.contentId,\\n      videoId: contentData.videoId,\\n      title: contentData.title,\\n      currentPerformance: contentData.currentMetrics,\\n      abTestPlan: abTestPlan,\\n      ctaStrategy: ctaStrategy,\\n      autoActions: autoActions,\\n      expectedImprovements: expectedImprovements,\\n      status: 'optimization_started',\\n      optimizedAt: new Date().toISOString()\\n    }\\n  }\\n}];"
          },
          "name": "Schedule AB Tests",
          "type": "n8n-nodes-base.function",
          "typeVersion": 1,
          "position": [1340, 250],
          "id": "opt_007"
        },
        {
          "parameters": {
            "channel": "#optimization-alerts",
            "text": "ğŸ”§ **AUTO-OPTIMIZATION INITIATED**\\n\\nğŸ¬ **Video**: {{$json.optimization.title}}\\nğŸ“Š **Current Performance**: {{$json.optimization.currentPerformance.performanceScore}}/100\\n\\nğŸ§ª **A/B Tests Started**:\\nâ€¢ **Thumbnails**: {{$json.optimization.abTestPlan.variants.length}} variants\\nâ€¢ **Duration**: 48 hours\\nâ€¢ **Traffic Split**: 25% each variant\\n\\nğŸ“ˆ **Expected Improvements**:\\nâ€¢ CTR: {{$json.optimization.expectedImprovements.ctrImprovement}}\\nâ€¢ Subscriptions: {{$json.optimization.expectedImprovements.subscriptionImprovement}}\\nâ€¢ Overall Score: {{$json.optimization.expectedImprovements.overallScore}}\\n\\nâ° **Timeline**:\\nâ€¢ 24h: Mid-point check\\nâ€¢ 48h: Auto-apply winner\\n\\nğŸ¯ **Actions**: ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìµœì í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.",
            "username": "OptimizationBot",
            "iconEmoji": ":gear:"
          },
          "name": "Optimization Started Alert",
          "type": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "position": [1560, 200],
          "id": "opt_008"
        },
        {
          "parameters": {
            "operation": "insert",
            "table": "optimization_history",
            "columns": [
              "content_id",
              "video_id",
              "optimization_type",
              "ab_test_plan",
              "cta_strategy",
              "expected_improvements",
              "status",
              "started_at"
            ],
            "additionalFields": {
              "optimization_type": "thumbnail_cta_combined",
              "status": "active",
              "started_at": "NOW()"
            }
          },
          "name": "Log Optimization",
          "type": "n8n-nodes-base.postgres",
          "typeVersion": 1,
          "position": [1560, 300],
          "id": "opt_009"
        }
      ],
      "connections": {
        "Optimization Check Trigger": {
          "main": [["Get Underperforming Content"]]
        },
        "Get Underperforming Content": {
          "main": [["Analyze & Plan Optimizations"]]
        },
        "Analyze & Plan Optimizations": {
          "main": [["Has High Priority Actions"]]
        },
        "Has High Priority Actions": {
          "main": [
            ["Generate Optimized Thumbnails", "Optimize CTA Strategy"],
            []
          ]
        },
        "Generate Optimized Thumbnails": {
          "main": [["Schedule AB Tests"]]
        },
        "Optimize CTA Strategy": {
          "main": [["Schedule AB Tests"]]
        },
        "Schedule AB Tests": {
          "main": [["Optimization Started Alert", "Log Optimization"]]
        }
      }
    }
  ],
  "database_schema": {
    "tables": [
      {
        "name": "trend_analysis",
        "columns": [
          {"name": "id", "type": "SERIAL PRIMARY KEY"},
          {"name": "platform", "type": "VARCHAR(50)"},
          {"name": "video_id", "type": "VARCHAR(255)"},
          {"name": "title", "type": "VARCHAR(500)"},
          {"name": "channel_title", "type": "VARCHAR(255)"},
          {"name": "channel_id", "type": "VARCHAR(255)"},
          {"name": "view_count", "type": "BIGINT"},
          {"name": "like_count", "type": "INTEGER"},
          {"name": "comment_count", "type": "INTEGER"},
          {"name": "engagement_rate", "type": "DECIMAL(5,2)"},
          {"name": "trend_score", "type": "DECIMAL(8,2)"},
          {"name": "keywords", "type": "TEXT[]"},
          {"name": "published_at", "type": "TIMESTAMP"},
          {"name": "category_id", "type": "INTEGER"},
          {"name": "thumbnail_url", "type": "TEXT"},
          {"name": "analyzed_at", "type": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"}
        ],
        "indexes": [
          "CREATE INDEX idx_trend_score ON trend_analysis(trend_score DESC);",
          "CREATE INDEX idx_analyzed_at ON trend_analysis(analyzed_at DESC);"
        ]
      },
      {
        "name": "content_queue",
        "columns": [
          {"name": "id", "type": "SERIAL PRIMARY KEY"},
          {"name": "title", "type": "VARCHAR(500)"},
          {"name": "script", "type": "TEXT"},
          {"name": "thumbnail_url", "type": "TEXT"},
          {"name": "description", "type": "TEXT"},
          {"name": "tags", "type": "TEXT"},
          {"name": "quality_score", "type": "INTEGER"},
          {"name": "estimated_ctr", "type": "DECIMAL(5,2)"},
          {"name": "estimated_views", "type": "INTEGER"},
          {"name": "scheduled_time", "type": "TIMESTAMP"},
          {"name": "content_type", "type": "VARCHAR(50)"},
          {"name": "status", "type": "VARCHAR(50) DEFAULT 'pending'"},
          {"name": "youtube_video_id", "type": "VARCHAR(255)"},
          {"name": "youtube_url", "type": "TEXT"},
          {"name": "upload_success_rate", "type": "INTEGER"},
          {"name": "uploaded_at", "type": "TIMESTAMP"},
          {"name": "created_at", "type": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"}
        ],
        "indexes": [
          "CREATE INDEX idx_content_status ON content_queue(status);",
          "CREATE INDEX idx_scheduled_time ON content_queue(scheduled_time);"
        ]
      },
      {
        "name": "performance_analytics",
        "columns": [
          {"name": "id", "type": "SERIAL PRIMARY KEY"},
          {"name": "content_id", "type": "INTEGER REFERENCES content_queue(id)"},
          {"name": "video_id", "type": "VARCHAR(255)"},
          {"name": "hours_elapsed", "type": "DECIMAL(6,2)"},
          {"name": "views", "type": "BIGINT"},
          {"name": "likes", "type": "INTEGER"},
          {"name": "comments", "type": "INTEGER"},
          {"name": "shares", "type": "INTEGER"},
          {"name": "subscribers_gained", "type": "INTEGER"},
          {"name": "click_through_rate", "type": "DECIMAL(5,2)"},
          {"name": "subscription_rate", "type": "DECIMAL(5,2)"},
          {"name": "engagement_rate", "type": "DECIMAL(5,2)"},
          {"name": "performance_score", "type": "DECIMAL(5,2)"},
          {"name": "alert_level", "type": "VARCHAR(20)"},
          {"name": "view_velocity", "type": "INTEGER"},
          {"name": "analyzed_at", "type": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"}
        ],
        "indexes": [
          "CREATE INDEX idx_performance_video ON performance_analytics(video_id);",
          "CREATE INDEX idx_alert_level ON performance_analytics(alert_level, analyzed_at);"
        ]
      },
      {
        "name": "optimization_history",
        "columns": [
          {"name": "id", "type": "SERIAL PRIMARY KEY"},
          {"name": "content_id", "type": "INTEGER REFERENCES content_queue(id)"},
          {"name": "video_id", "type": "VARCHAR(255)"},
          {"name": "optimization_type", "type": "VARCHAR(100)"},
          {"name": "ab_test_plan", "type": "JSONB"},
          {"name": "cta_strategy", "type": "TEXT"},
          {"name": "expected_improvements", "type": "JSONB"},
          {"name": "actual_results", "type": "JSONB"},
          {"name": "status", "type": "VARCHAR(50)"},
          {"name": "started_at", "type": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"},
          {"name": "completed_at", "type": "TIMESTAMP"}
        ],
        "indexes": [
          "CREATE INDEX idx_optimization_status ON optimization_history(status);",
          "CREATE INDEX idx_optimization_video ON optimization_history(video_id);"
        ]
      }
    ]
  },
  "environment_variables": {
    "required": [
      "YOUTUBE_API_KEY",
      "YOUTUBE_CHANNEL_ID", 
      "YOUTUBE_ACCESS_TOKEN",
      "OPENAI_API_KEY",
      "SLACK_TOKEN",
      "INSTAGRAM_ACCESS_TOKEN",
      "INSTAGRAM_ACCOUNT_ID",
      "TIKTOK_ACCESS_TOKEN",
      "TWITTER_API_KEY",
      "TWITTER_ACCESS_TOKEN",
      "POSTGRES_HOST",
      "POSTGRES_DB",
      "POSTGRES_USER",
      "POSTGRES_PASSWORD",
      "N8N_ENCRYPTION_KEY"
    ],
    "optional": [
      "GOOGLE_ANALYTICS_ID",
      "FACEBOOK_ACCESS_TOKEN",
      "WEBHOOK_URL",
      "SMTP_HOST",
      "SMTP_USER",
      "SMTP_PASS"
    ]
  },
  "deployment_instructions": {
    "setup_steps": [
      "1. Clone repository and navigate to project directory",
      "2. Copy .env.example to .env and fill in all required API keys",
      "3. Run 'docker-compose up -d' to start n8n and PostgreSQL",
      "4. Access n8n at http://localhost:5678",
      "5. Import all workflow JSON files",
      "6. Run database schema creation script",
      "7. Test each workflow individually",
      "8. Enable all workflows for production"
    ],
    "verification_checklist": [
      "âœ… All API connections working",
      "âœ… Database tables created",
      "âœ… Workflows imported successfully",
      "âœ… Test data flowing through pipelines",
      "âœ… Slack notifications working",
      "âœ… Error handling tested",
      "âœ… Performance monitoring active"
    ]
  }
}










